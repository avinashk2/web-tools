<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diff Checker - Web Tools</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .diff-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .diff-output {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 500px;
            overflow-y: auto;
            border: 2px solid var(--border);
        }

        .diff-line {
            padding: 2px 4px;
            margin: 0;
        }

        .diff-added {
            background: #d4edda;
            color: #155724;
        }

        .diff-removed {
            background: #f8d7da;
            color: #721c24;
        }

        .diff-unchanged {
            color: #6c757d;
        }

        .diff-stats {
            display: flex;
            justify-content: space-around;
            padding: 1rem;
            background: var(--bg-light);
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
        }

        .stat-label {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .diff-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">Web Tools</a>
            <div class="nav-links">
                <a href="diff-checker.html" style="color: var(--primary);">Diff Checker</a>
                <a href="password-generator.html">Password Gen</a>
                <a href="typing-test.html">Typing Test</a>
                <a href="markdown-preview.html">Markdown</a>
                <a href="json-formatter.html">JSON Formatter</a>
                <a href="movie-database.html">Movies/Books</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="page-header">
            <h1>üìù Diff Checker</h1>
            <p>Compare two texts and see the differences highlighted</p>
        </div>

        <div class="card">
            <div class="diff-container">
                <div class="form-group">
                    <label for="text1">Original Text</label>
                    <textarea id="text1" placeholder="Paste your original text here..."></textarea>
                </div>
                <div class="form-group">
                    <label for="text2">Modified Text</label>
                    <textarea id="text2" placeholder="Paste your modified text here..."></textarea>
                </div>
            </div>

            <div class="text-center">
                <button id="compare-btn" class="btn btn-primary">Compare Texts</button>
                <button id="clear-btn" class="btn btn-secondary">Clear</button>
            </div>
        </div>

        <div id="results" class="hidden">
            <div class="diff-stats">
                <div class="stat-item">
                    <div class="stat-value" id="additions">0</div>
                    <div class="stat-label">Additions</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="deletions">0</div>
                    <div class="stat-label">Deletions</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="changes">0</div>
                    <div class="stat-label">Total Changes</div>
                </div>
            </div>

            <div class="card">
                <h3 class="mb-2">Comparison Result</h3>
                <div class="diff-output" id="diff-output"></div>
            </div>
        </div>
    </div>

    <footer>
        <p>Built with HTML, CSS, and JavaScript | Hosted on GitHub Pages</p>
    </footer>

    <script>
        const text1Input = document.getElementById('text1');
        const text2Input = document.getElementById('text2');
        const compareBtn = document.getElementById('compare-btn');
        const clearBtn = document.getElementById('clear-btn');
        const resultsDiv = document.getElementById('results');
        const diffOutput = document.getElementById('diff-output');
        const additionsEl = document.getElementById('additions');
        const deletionsEl = document.getElementById('deletions');
        const changesEl = document.getElementById('changes');

        // Simple line-by-line diff algorithm
        function computeDiff(text1, text2) {
            const lines1 = text1.split('\n');
            const lines2 = text2.split('\n');
            const result = [];
            let additions = 0;
            let deletions = 0;

            const maxLen = Math.max(lines1.length, lines2.length);

            for (let i = 0; i < maxLen; i++) {
                const line1 = lines1[i] || '';
                const line2 = lines2[i] || '';

                if (line1 === line2) {
                    result.push({ type: 'unchanged', content: line1 });
                } else {
                    if (line1 && line1 !== line2) {
                        result.push({ type: 'removed', content: `- ${line1}` });
                        deletions++;
                    }
                    if (line2 && line1 !== line2) {
                        result.push({ type: 'added', content: `+ ${line2}` });
                        additions++;
                    }
                }
            }

            return { result, additions, deletions };
        }

        function displayDiff() {
            const text1 = text1Input.value;
            const text2 = text2Input.value;

            if (!text1 && !text2) {
                alert('Please enter some text to compare');
                return;
            }

            const { result, additions, deletions } = computeDiff(text1, text2);

            // Display stats
            additionsEl.textContent = additions;
            deletionsEl.textContent = deletions;
            changesEl.textContent = additions + deletions;

            // Display diff
            diffOutput.innerHTML = result.map(item => {
                const className = `diff-line diff-${item.type}`;
                const content = item.content || '(empty line)';
                return `<div class="${className}">${escapeHtml(content)}</div>`;
            }).join('');

            resultsDiv.classList.remove('hidden');
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function clearAll() {
            text1Input.value = '';
            text2Input.value = '';
            resultsDiv.classList.add('hidden');
        }

        compareBtn.addEventListener('click', displayDiff);
        clearBtn.addEventListener('click', clearAll);

        // Allow Enter+Ctrl to compare
        [text1Input, text2Input].forEach(input => {
            input.addEventListener('keydown', (e) => {
                if (e.ctrlKey && e.key === 'Enter') {
                    displayDiff();
                }
            });
        });
    </script>
</body>
</html>
